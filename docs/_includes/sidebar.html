<div id="sub-nav-collapse" class="sub-nav-collapse">
  <a href="{{ '/' | relative_url }}/" class="nav-logo-wrapper">
    <div class="nav-logo">
      <img src="{{ '/assets/linuxviewer_64x64.png' | relative_url }}" alt="Logo image" class="logo-image">
      <span>{{ site.header_title }}</span>
    </div>
  </a>
  <aside class="sidebar">
    <ul class='Nav'>
      {% assign chapters = site.pages | sort: "path" -%}
      {% assign prev_depth = 0 -%}
      {% assign close_count = 0 -%}
      {% for chapter in chapters -%}
        {% if chapter.url contains "/chapters/" -%}
          {% assign url_parts = chapter.url | split: "/" -%}
          {% assign depth = url_parts | size -%}
          {% assign intermediate_close_count = close_count -%}
          {% assign partial_path = "/chapters/" -%}
          {% for current_depth in (3..depth) -%}
            {% if current_depth == depth %}
          {% assign nav_class = "Nav__item" -%}
          {% if chapter.url == page.url -%}
            {% assign nav_class = nav_class | append: " Nav__item--active" -%}
          {% endif %}
      <li class="{{ nav_class }}">
        <a href="{{ chapter.url | relative_url }}">{{ chapter.toc_title | default: chapter.title | escape }}</a>
      </li>
            {% else -%}
              {% assign depth_index = current_depth | minus: 1 -%}
              {% assign partial_path = partial_path | append: url_parts[depth_index] | append: '/' -%}
              {% if current_depth <= prev_depth and url_parts[depth_index] == prev_url_parts[depth_index] -%}
                {% assign intermediate_close_count = intermediate_close_count | minus: 1 -%}
                {% continue -%}
              {% endif -%}
              {% assign partial_path_length = partial_path | size -%}
              {% assign leading_part_page_url = page.url | slice: 0, partial_path_length -%}
              {% assign label = url_parts[depth_index] | replace: "_", " " -%}
              {% assign last_index = label | size | minus: 1 -%}
              {% for i in (0..last_index) -%}
                {% assign char = label | slice: i -%}
                {% if char != '0' and char != '1' and char != '2' and char != '3' and char != '4' and char != '5' and char != '6' and char != '7' and char != '8' and char != '9' and char != ' ' -%}
                  {% assign label = label | slice: i, last_index -%}
                  {% break -%}
                {% endif -%}
              {% endfor -%}
              {% for i in (1..intermediate_close_count) %}
        </ul>
      </li>
              {% endfor -%}
              {% assign close_count = close_count | minus: intermediate_close_count -%}
              {% assign nav_class = "Nav__item has-children" -%}
              {% if leading_part_page_url == partial_path -%}
                {% assign nav_class = nav_class | append: " Nav__item--open" -%}
              {% endif %}
      <li class="{{ nav_class }}">
        <a href="{{ chapter.url | relative_url }}" class="folder">
          <i class="Nav__arrow">&nbsp;</i>{{ label }}
        </a>
        <ul class="Nav">
              {% assign close_count = close_count | plus: 1 -%}
            {% endif -%}
          {% endfor -%}
          {% assign prev_depth = depth -%}
          {% assign prev_url_parts = url_parts -%}
        {% endif -%}
      {% endfor -%}
      {% for i in (1..close_count) %}
        </ul>
      </li>
      {% endfor %}
    </ul>
  </aside>
  <div class=sidebar-links>
    <a href="https://github.com/{{ site.github_username }}/{{ site.github_projectname }}" target="_blank">GitHub Repository</a>
    <br>
    <a href="https://www.youtube.com/@carlowood9834/streams" target="_blank">Streaming Live on youtube</a>
    <br>
    <a href="https://paypal.me/linuxviewer?locale.x=en_US" rel="nofollow">Support this project</a>
    <br>
  </div>
</div>
